{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Preloader from '@/components/global/PreloaderComponent.vue';\nimport ThemeSettings from '@/components/layout/ThemeSettings.vue';\nimport { mapActions } from 'vuex';\nimport { axiosAuth } from '@/plugins/axios/axiosAuth';\nexport default {\n  name: 'RegisterView',\n  components: {\n    Preloader,\n    ThemeSettings\n  },\n  data() {\n    return {\n      userRoles: [{\n        value: 'donor',\n        label: 'Donor'\n      }, {\n        value: 'hospital',\n        label: 'Hospital'\n      }, {\n        value: 'bloodBank',\n        label: 'Blood Bank'\n      }],\n      form: {\n        name: '',\n        national_id: '',\n        phone_number: '',\n        city: '',\n        email: '',\n        password: '',\n        role: '' // Add role field\n      },\n      cities: [] // This will store the list of cities from your API\n    };\n  },\n  created() {\n    this.fetchCities();\n  },\n  methods: {\n    validateForm() {\n      // Simple validation example\n      if (!this.form.name || this.form.name.length < 2) {\n        alert('Please enter a valid name');\n        return false;\n      }\n      if (this.form.role == 'donor') {\n        if (!this.form.national_id || this.form.national_id.length !== 14) {\n          alert('National ID must be 14 characters');\n          return false;\n        }\n      }\n      if (this.form.role == 'donor') {\n        if (!this.form.phone_number || !/^[0-9]{10,15}$/.test(this.form.phone_number)) {\n          alert('Please enter a valid phone number');\n          return false;\n        }\n      }\n      if (!this.form.city) {\n        alert('Please select a city');\n        return false;\n      }\n      if (!this.form.email || !/^\\S+@\\S+\\.\\S+$/.test(this.form.email)) {\n        alert('Please enter a valid email');\n        return false;\n      }\n      if (!this.form.password || this.form.password.length < 8) {\n        alert('Password must be at least 8 characters');\n        return false;\n      }\n      return true;\n    },\n    ...mapActions('auth', ['register']),\n    // Map the register action from your auth store\n\n    async fetchCities() {\n      try {\n        // Replace with your actual API endpoint to fetch cities\n        const response = await axiosAuth.get('cities/');\n        this.cities = response.data;\n      } catch (error) {\n        console.error('Error fetching cities:', error);\n      }\n    },\n    async handleSubmit() {\n      if (!this.validateForm()) return;\n      try {\n        // Dispatch the register action from your auth store\n        await this.register(this.form);\n\n        // Redirect to login or dashboard after successful registration\n        this.$router.push('/login');\n\n        // Optional: Show success message\n        // this.$toast.success('Registration successful! Please login.');\n      } catch (error) {\n        console.error('Registration error:', error);\n\n        // Optional: Show error message\n        alert(error.response?.data?.message || 'Registration failed. Please try again.');\n      }\n    }\n  }\n};","map":{"version":3,"names":["Preloader","ThemeSettings","mapActions","axiosAuth","name","components","data","userRoles","value","label","form","national_id","phone_number","city","email","password","role","cities","created","fetchCities","methods","validateForm","length","alert","test","response","get","error","console","handleSubmit","register","$router","push","message"],"sources":["D:\\hadeerwork\\erpnext-vue-front\\src\\views\\auth\\RegisterView.vue"],"sourcesContent":["<template>\r\n    <div class=\"boxed-size bg-white\">\r\n      <Preloader />\r\n      <div class=\"container\">\r\n      <div class=\"main-content d-flex flex-column p-0\">\r\n        <div class=\"m-auto m-1230\">\r\n          <div class=\"row align-items-center\">\r\n            <div class=\"col-lg-6 d-none d-lg-block\">\r\n              <img src=\"@/assets/images/register.jpg\" class=\"rounded-3\" alt=\"register\">\r\n            </div>\r\n            <div class=\"col-lg-6\">\r\n              <div class=\"mw-480 ms-lg-auto\">\r\n                <div class=\"d-inline-block mb-4\">\r\n                  <img src=\"@/assets/images/logo.svg\" class=\"rounded-3 for-light-logo\" alt=\"login\">\r\n                  <img src=\"@/assets/images/white-logo.svg\" class=\"rounded-3 for-dark-logo\" alt=\"login\">\r\n                </div>\r\n                <h3 class=\"fs-28 mb-2\">Register to Trezo Dashboard</h3>\r\n                <p class=\"fw-medium fs-16 mb-4\">Register with social account or enter your details</p>\r\n                <div class=\"row justify-content-center\">\r\n                  <div class=\"col-lg-4 col-sm-4\">\r\n                    <a href=\"https://www.google.com/\" target=\"_blank\" class=\"btn btn-outline-secondary bg-transparent w-100 py-2 hover-bg mb-4\" style=\"border-color: #D6DAE1;\">\r\n                      <img src=\"@/assets/images/google.svg\" alt=\"google\">\r\n                    </a>\r\n                  </div>\r\n                  <div class=\"col-lg-4 col-sm-4\">\r\n                    <a href=\"https://www.facebook.com/\" target=\"_blank\" class=\"btn btn-outline-secondary bg-transparent w-100 py-2 hover-bg mb-4\" style=\"border-color: #D6DAE1;\">\r\n                      <img src=\"@/assets/images/facebook2.svg\" alt=\"facebook2\">\r\n                    </a>\r\n                  </div>\r\n                  <div class=\"col-lg-4 col-sm-4\">\r\n                    <a href=\"https://www.apple.com/\" target=\"_blank\" class=\"btn btn-outline-secondary bg-transparent w-100 py-2 hover-bg mb-4\" style=\"border-color: #D6DAE1;\">\r\n                      <img src=\"@/assets/images/apple.svg\" alt=\"apple\">\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <!-- <form @submit.prevent=\"handleSubmit\">\r\n                  <div class=\"form-group mb-3\">\r\n                    <label class=\"label text-secondary\">name</label>\r\n                    <input type=\"text\" class=\"form-control\" v-model=\"form.name\" placeholder=\"Enter your full name\" required>\r\n                  </div>\r\n                  <div class=\"form-group mb-3\">\r\n                    <label class=\"label text-secondary\">Email Address</label>\r\n                    <input type=\"email\" class=\"form-control\" v-model=\"form.email\" placeholder=\"example@trezo.com\" required>\r\n                  </div>\r\n                  <div class=\"form-group mb-3\">\r\n                    <label class=\"label text-secondary\">Password</label>\r\n                    <input type=\"password\" class=\"form-control\" v-model=\"form.password\" placeholder=\"Type password\" required>\r\n                  </div>\r\n                  <div class=\"form-group mb-3\">\r\n                    <button type=\"submit\" class=\"btn btn-primary fw-medium py-2 px-3 w-100\">\r\n                      <div class=\"d-flex align-items-center justify-content-center py-1\">\r\n                        <i class=\"material-symbols-outlined text-white fs-20 me-2\">person_4</i>\r\n                        <span>Register</span>\r\n                      </div>\r\n                    </button>\r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <p>By confirming your email, you agree to our <a href=\"#\" class=\"fw-medium text-decoration-none\">Terms of Service</a> and that you have read and understood our <a href=\"#\" class=\"fw-medium text-decoration-none\">Privacy Policy</a>.</p>\r\n                    <p>Already have an account. <router-link to=\"/login\" class=\"fw-medium text-primary text-decoration-none\">Log In</router-link></p>\r\n                  </div>\r\n                </form> -->\r\n                <form @submit.prevent=\"handleSubmit\">\r\n    <div class=\"form-group mb-3\">\r\n      <label class=\"label text-secondary\">Full Name</label>\r\n      <input type=\"text\" class=\"form-control\" v-model=\"form.name\" placeholder=\"Enter your full name\" required>\r\n    </div>\r\n    <div class=\"form-group mb-3\" v-if=\"form.role == 'donor' \">\r\n      <label class=\"label text-secondary\">National ID</label>\r\n      <input type=\"text\" class=\"form-control\" v-model=\"form.national_id\" placeholder=\"Enter your national ID\" required>\r\n    </div>\r\n    <div class=\"form-group mb-3\" v-if=\"form.role == 'donor' \">\r\n      <label class=\"label text-secondary\" >Phone Number</label>\r\n      <input type=\"tel\" class=\"form-control\" v-model=\"form.phone_number\" placeholder=\"Enter your phone number\" required>\r\n    </div>\r\n    <div class=\"form-group mb-3\">\r\n      <label class=\"label text-secondary\">City</label>\r\n      <select class=\"form-control\" v-model=\"form.city\" required>\r\n        <option value=\"\" disabled selected>Select your city</option>\r\n        <option v-for=\"city in cities\" :key=\"city.id\" :value=\"city.id\">{{ city.name }}</option>\r\n      </select>\r\n    </div>\r\n    <div class=\"form-group mb-3\" >\r\n      <label class=\"label text-secondary\">Email Address</label>\r\n      <input type=\"email\" class=\"form-control\" v-model=\"form.email\" placeholder=\"example@trezo.com\" required>\r\n    </div>\r\n    <div class=\"form-group mb-3\">\r\n      <label class=\"label text-secondary\">Password</label>\r\n      <input type=\"password\" class=\"form-control\" v-model=\"form.password\" placeholder=\"Type password\" required>\r\n    </div>\r\n    <div class=\"form-group mb-3\">\r\n    <label class=\"label text-secondary\">Register As</label>\r\n    <div class=\"d-flex flex-wrap gap-3\">\r\n      <div class=\"form-check\" v-for=\"role in userRoles\" :key=\"role.value\">\r\n        <input \r\n          class=\"form-check-input\" \r\n          type=\"radio\" \r\n          v-model=\"form.role\" \r\n          :id=\"'role-' + role.value\" \r\n          :value=\"role.value\"\r\n          required\r\n        >\r\n        <label class=\"form-check-label\" :for=\"'role-' + role.value\">\r\n          {{ role.label }}\r\n        </label>\r\n      </div>\r\n    </div>\r\n  </div>\r\n    <div class=\"form-group mb-3\">\r\n                    <button type=\"submit\" class=\"btn btn-primary fw-medium py-2 px-3 w-100\">\r\n                      <div class=\"d-flex align-items-center justify-content-center py-1\">\r\n                        <i class=\"material-symbols-outlined text-white fs-20 me-2\">person_4</i>\r\n                        <span>Register</span>\r\n                      </div>\r\n                    </button>\r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <p>By confirming your email, you agree to our <a href=\"#\" class=\"fw-medium text-decoration-none\">Terms of Service</a> and that you have read and understood our <a href=\"#\" class=\"fw-medium text-decoration-none\">Privacy Policy</a>.</p>\r\n                    <p>Already have an account. <router-link to=\"/login\" class=\"fw-medium text-primary text-decoration-none\">Log In</router-link></p>\r\n                  </div>\r\n  </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n      <ThemeSettings />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import Preloader from '@/components/global/PreloaderComponent.vue';\r\n  import ThemeSettings from '@/components/layout/ThemeSettings.vue';\r\n  import { mapActions } from 'vuex';\r\n  import {axiosAuth} from '@/plugins/axios/axiosAuth';\r\n  \r\n  export default {\r\n    name: 'RegisterView',\r\n    components: {\r\n      Preloader,\r\n      ThemeSettings\r\n    },\r\n    data() {\r\n      return {\r\n        userRoles: [\r\n        { value: 'donor', label: 'Donor' },\r\n        { value: 'hospital', label: 'Hospital' },\r\n        { value: 'bloodBank', label: 'Blood Bank' }\r\n      ],\r\n        form: {\r\n          name: '',\r\n          national_id: '',\r\n          phone_number: '',\r\n          city: '',\r\n          email: '',\r\n          password: '',\r\n          role: '' // Add role field\r\n        },\r\n        cities: [] // This will store the list of cities from your API\r\n      }\r\n    },\r\n    created() {\r\n      this.fetchCities();\r\n    },\r\n    methods: {\r\n      validateForm() {\r\n    // Simple validation example\r\n    if (!this.form.name || this.form.name.length < 2) {\r\n      alert('Please enter a valid name');\r\n      return false;\r\n    }\r\n    if(this.form.role == 'donor'){\r\n      if (!this.form.national_id || this.form.national_id.length !== 14) {\r\n      alert('National ID must be 14 characters');\r\n      return false;\r\n    }\r\n    }\r\n   \r\n    if(this.form.role == 'donor'){\r\n\r\n      if (!this.form.phone_number || !/^[0-9]{10,15}$/.test(this.form.phone_number)) {\r\n      alert('Please enter a valid phone number');\r\n      return false;\r\n    }\r\n    \r\n    }\r\n   \r\n    \r\n    if (!this.form.city) {\r\n      alert('Please select a city');\r\n      return false;\r\n    }\r\n    \r\n    if (!this.form.email || !/^\\S+@\\S+\\.\\S+$/.test(this.form.email)) {\r\n      alert('Please enter a valid email');\r\n      return false;\r\n    }\r\n    \r\n    if (!this.form.password || this.form.password.length < 8) {\r\n      alert('Password must be at least 8 characters');\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n  },\r\n      ...mapActions('auth', ['register']), // Map the register action from your auth store\r\n      \r\n      async fetchCities() {\r\n        try {\r\n          // Replace with your actual API endpoint to fetch cities\r\n          const response = await axiosAuth.get('cities/');\r\n          this.cities = response.data;\r\n        } catch (error) {\r\n          console.error('Error fetching cities:', error);\r\n        }\r\n      },\r\n      \r\n      async handleSubmit() {\r\n        if (!this.validateForm()) return;\r\n        try {\r\n          // Dispatch the register action from your auth store\r\n          await this.register(this.form);\r\n          \r\n          // Redirect to login or dashboard after successful registration\r\n          this.$router.push('/login');\r\n          \r\n          // Optional: Show success message\r\n          // this.$toast.success('Registration successful! Please login.');\r\n        } catch (error) {\r\n          console.error('Registration error:', error);\r\n          \r\n          // Optional: Show error message\r\n          alert(error.response?.data?.message || 'Registration failed. Please try again.');\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style>\r\n  /* Global styles can go here or in your main App.vue */\r\n  .boxed-size {\r\n    min-height: 100vh;\r\n    position: relative;\r\n  }\r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}