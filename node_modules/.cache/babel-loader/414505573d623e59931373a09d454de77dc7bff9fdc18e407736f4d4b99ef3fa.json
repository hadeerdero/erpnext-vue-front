{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      form: {\n        customer: '',\n        posting_date: new Date().toISOString().slice(0, 10),\n        due_date: '',\n        items: [{\n          item_code: '',\n          item_name: '',\n          description: '',\n          qty: 1,\n          rate: 0,\n          amount: 0\n        }],\n        tax_template: '',\n        taxes: []\n      },\n      customers: [],\n      items: [],\n      taxTemplates: [],\n      recentInvoices: [],\n      loading: false,\n      error: null,\n      success: null\n    };\n  },\n  computed: {\n    netTotal() {\n      return this.form.items.reduce((sum, item) => sum + (item.amount || 0), 0);\n    },\n    grandTotal() {\n      const taxTotal = this.form.taxes.reduce((sum, tax) => sum + (tax.tax_amount || 0), 0);\n      return this.netTotal + taxTotal;\n    }\n  },\n  created() {\n    this.fetchCustomers();\n    this.fetchItems();\n    this.fetchTaxTemplates();\n    this.fetchRecentInvoices();\n  },\n  methods: {\n    async fetchCustomers() {\n      try {\n        const response = await axios.get('/api/method/frappe.client.get_list', {\n          params: {\n            doctype: 'Customer',\n            fields: ['name', 'customer_name'],\n            limit: 100\n          }\n        });\n        this.customers = response.data.message;\n      } catch (error) {\n        console.error('Error fetching customers:', error);\n      }\n    },\n    async fetchItems() {\n      try {\n        const response = await axios.get('/api/method/frappe.client.get_list', {\n          params: {\n            doctype: 'Item',\n            fields: ['name', 'item_name', 'standard_rate', 'description'],\n            filters: [['disabled', '=', 0]],\n            limit: 100\n          }\n        });\n        this.items = response.data.message;\n      } catch (error) {\n        console.error('Error fetching items:', error);\n      }\n    },\n    async fetchTaxTemplates() {\n      try {\n        const response = await axios.get('/api/method/frappe.client.get_list', {\n          params: {\n            doctype: 'Sales Taxes and Charges Template',\n            fields: ['name', 'title', 'taxes.rate', 'taxes.account_head', 'taxes.description'],\n            limit: 20\n          }\n        });\n        this.taxTemplates = response.data.message;\n      } catch (error) {\n        console.error('Error fetching tax templates:', error);\n      }\n    },\n    async fetchRecentInvoices() {\n      try {\n        const response = await axios.get('/api/method/frappe.client.get_list', {\n          params: {\n            doctype: 'Sales Invoice',\n            fields: ['name', 'customer_name', 'posting_date', 'grand_total', 'status'],\n            order_by: 'modified desc',\n            limit: 5\n          }\n        });\n        this.recentInvoices = response.data.message;\n      } catch (error) {\n        console.error('Error fetching recent invoices:', error);\n      }\n    },\n    addItem() {\n      this.form.items.push({\n        item_code: '',\n        item_name: '',\n        description: '',\n        qty: 1,\n        rate: 0,\n        amount: 0\n      });\n    },\n    removeItem(index) {\n      if (this.form.items.length > 1) {\n        this.form.items.splice(index, 1);\n      }\n    },\n    updateItemDetails(index) {\n      const selectedItem = this.items.find(item => item.name === this.form.items[index].item_code);\n      if (selectedItem) {\n        this.form.items[index].item_name = selectedItem.item_name;\n        this.form.items[index].description = selectedItem.description;\n        if (selectedItem.standard_rate) {\n          this.form.items[index].rate = selectedItem.standard_rate;\n        }\n        this.calculateAmount(index);\n      }\n    },\n    calculateAmount(index) {\n      this.form.items[index].amount = this.form.items[index].qty * this.form.items[index].rate;\n    },\n    updateTaxes() {\n      if (!this.form.tax_template) {\n        this.form.taxes = [];\n        return;\n      }\n      const selectedTemplate = this.taxTemplates.find(t => t.name === this.form.tax_template);\n      if (selectedTemplate) {\n        this.form.taxes = selectedTemplate.taxes.map(tax => ({\n          ...tax,\n          tax_amount: this.netTotal * (tax.rate / 100)\n        }));\n      }\n    },\n    formatCurrency(value) {\n      return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD'\n      }).format(value);\n    },\n    formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString();\n    },\n    async submitInvoice() {\n      this.loading = true;\n      this.error = null;\n      this.success = null;\n      try {\n        const payload = {\n          doctype: 'Sales Invoice',\n          customer: this.form.customer,\n          posting_date: this.form.posting_date,\n          due_date: this.form.due_date || this.form.posting_date,\n          items: this.form.items.map(item => ({\n            item_code: item.item_code,\n            item_name: item.item_name,\n            description: item.description,\n            qty: item.qty,\n            rate: item.rate,\n            amount: item.amount\n          })),\n          taxes: this.form.taxes.map(tax => ({\n            charge_type: 'On Net Total',\n            account_head: tax.account_head,\n            description: tax.description,\n            rate: tax.rate,\n            tax_amount: tax.tax_amount\n          }))\n        };\n        const response = await axios.post('/api/method/frappe.client.insert', {\n          doc: payload\n        });\n        this.success = response.data.message.name;\n        this.resetForm();\n        this.fetchRecentInvoices();\n      } catch (error) {\n        console.error('Error creating invoice:', error);\n        this.error = error.response?.data?.message || 'Failed to create invoice. Please try again.';\n      } finally {\n        this.loading = false;\n      }\n    },\n    resetForm() {\n      this.form = {\n        customer: '',\n        posting_date: new Date().toISOString().slice(0, 10),\n        due_date: '',\n        items: [{\n          item_code: '',\n          item_name: '',\n          description: '',\n          qty: 1,\n          rate: 0,\n          amount: 0\n        }],\n        tax_template: '',\n        taxes: []\n      };\n    },\n    viewInvoice(invoiceName) {\n      // Implement your invoice viewing logic here\n      console.log('View invoice:', invoiceName);\n      // Example: this.$router.push(`/invoices/${invoiceName}`);\n    }\n  }\n};","map":{"version":3,"names":["axios","data","form","customer","posting_date","Date","toISOString","slice","due_date","items","item_code","item_name","description","qty","rate","amount","tax_template","taxes","customers","taxTemplates","recentInvoices","loading","error","success","computed","netTotal","reduce","sum","item","grandTotal","taxTotal","tax","tax_amount","created","fetchCustomers","fetchItems","fetchTaxTemplates","fetchRecentInvoices","methods","response","get","params","doctype","fields","limit","message","console","filters","order_by","addItem","push","removeItem","index","length","splice","updateItemDetails","selectedItem","find","name","standard_rate","calculateAmount","updateTaxes","selectedTemplate","t","map","formatCurrency","value","Intl","NumberFormat","style","currency","format","formatDate","dateString","toLocaleDateString","submitInvoice","payload","charge_type","account_head","post","doc","resetForm","viewInvoice","invoiceName","log"],"sources":["D:\\hadeerwork\\erpnext-vue-front\\src\\components\\layout\\SidebarComponent.vue"],"sourcesContent":["<!-- <template>\r\n    <div class=\"sidebar-area\" id=\"sidebar-area\" :class=\"{ 'collapsed': isCollapsed }\">\r\n      {{ isCollapsed }}\r\n      <div class=\"logo position-relative\">\r\n        <a href=\"index.html\" class=\"d-block text-decoration-none position-relative\">\r\n          <img src=\"assets/images/logo-icon.png\" alt=\"logo-icon\">\r\n          <span class=\"logo-text fw-bold text-dark\">Trezo</span>\r\n        </a>\r\n        <button class=\"sidebar-burger-menu bg-transparent p-0 border-0 opacity-0 z-n1 position-absolute top-50 end-0 translate-middle-y\" id=\"sidebar-burger-menu\">\r\n          <i data-feather=\"x\"></i>\r\n        </button>\r\n      </div>\r\n  \r\n      <aside id=\"layout-menu\" class=\"layout-menu menu-vertical menu active\" data-simplebar>\r\n        <ul class=\"menu-inner\">\r\n          <li class=\"menu-title small text-uppercase\">\r\n            <span class=\"menu-title-text\">MAIN</span>\r\n          </li>\r\n          \r\n         \r\n          <li class=\"menu-item\" :class=\"{ 'open': openMenus.dashboard }\">\r\n            <a href=\"javascript:void(0);\" class=\"menu-link menu-toggle\" @click=\"toggleMenu('dashboard')\">\r\n              <span class=\"material-symbols-outlined menu-icon\">dashboard</span>\r\n              <span class=\"title\">Dashboard</span>\r\n              <span class=\"count\">24</span>\r\n            </a>\r\n            <ul class=\"menu-sub\">\r\n              <li class=\"menu-item\">\r\n                <router-link to=\"/\" class=\"menu-link\" :class=\"{ 'active': $route.path === '/' }\">\r\n                  eCommerce\r\n                </router-link>\r\n              </li>\r\n              <li class=\"menu-item\">\r\n                <router-link to=\"/crm\" class=\"menu-link\">\r\n                  CRM\r\n                  <span class=\"new tag\">Hot</span>\r\n                </router-link>\r\n              </li>\r\n              \r\n            </ul>\r\n          </li>\r\n  \r\n         \r\n          <li class=\"menu-item\" :class=\"{ 'open': openMenus.frontPages }\">\r\n            <a href=\"javascript:void(0);\" class=\"menu-link menu-toggle\" @click=\"toggleMenu('frontPages')\">\r\n              <span class=\"material-symbols-outlined menu-icon\">note_stack</span>\r\n              <span class=\"title\">Front Pages</span>\r\n            </a>\r\n            <ul class=\"menu-sub\">\r\n              <li class=\"menu-item\">\r\n                <router-link to=\"/landing-page\" class=\"menu-link\">\r\n                  Home\r\n                </router-link>\r\n              </li>\r\n        \r\n            </ul>\r\n          </li>\r\n  \r\n         \r\n          <li class=\"menu-title small text-uppercase\">\r\n            <span class=\"menu-title-text\">APPS</span>\r\n          </li>\r\n  \r\n          <li class=\"menu-item\">\r\n            <router-link to=\"/to-do-list\" class=\"menu-link\">\r\n              <span class=\"material-symbols-outlined menu-icon\">format_list_bulleted</span>\r\n              <span class=\"title\">To Do List</span>\r\n            </router-link>\r\n          </li>\r\n  \r\n       \r\n          <li class=\"menu-item\">\r\n            <a href=\"#\" class=\"menu-link\" @click.prevent=\"logout\">\r\n              <span class=\"material-symbols-outlined menu-icon\">logout</span>\r\n              <span class=\"title\">Logout</span>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </aside>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    name: 'SidebarComponent',\r\n    props: {\r\n    isCollapsed: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n    data() {\r\n      return {\r\n        openMenus: {\r\n          dashboard: true,\r\n          frontPages: false,\r\n          // Add other menu states here\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      toggleMenu(menu) {\r\n        this.openMenus[menu] = !this.openMenus[menu]\r\n      },\r\n      logout() {\r\n        // Implement logout logic here\r\n        this.$store.dispatch('auth/logout')\r\n        this.$router.push('/login')\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  \r\n  </style> -->\r\n\r\n\r\n  <template>\r\n  <div class=\"sales-invoice-app\">\r\n    <!-- Header -->\r\n    <header class=\"app-header\">\r\n      <h1>Sales Invoice Management</h1>\r\n    </header>\r\n\r\n    <!-- Main Content -->\r\n    <main class=\"app-main\">\r\n      <div class=\"invoice-container\">\r\n        <!-- Invoice Form -->\r\n        <div class=\"invoice-form\">\r\n          <h2>Create New Sales Invoice</h2>\r\n          \r\n          <form @submit.prevent=\"submitInvoice\">\r\n            <!-- Customer Section -->\r\n            <div class=\"form-section\">\r\n              <h3>Customer Details</h3>\r\n              <div class=\"form-row\">\r\n                <div class=\"form-group\">\r\n                  <label>Customer *</label>\r\n                  <select v-model=\"form.customer\" required>\r\n                    <option value=\"\" disabled>Select Customer</option>\r\n                    <option v-for=\"customer in customers\" :value=\"customer.name\" :key=\"customer.name\">\r\n                      {{ customer.customer_name }}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n                \r\n                <div class=\"form-group\">\r\n                  <label>Posting Date *</label>\r\n                  <input type=\"date\" v-model=\"form.posting_date\" required>\r\n                </div>\r\n                \r\n                <div class=\"form-group\">\r\n                  <label>Due Date *</label>\r\n                  <input type=\"date\" v-model=\"form.due_date\" required>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Items Section -->\r\n            <div class=\"form-section\">\r\n              <h3>Items</h3>\r\n              <div class=\"items-table\">\r\n                <table>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Item *</th>\r\n                      <th>Description</th>\r\n                      <th>Qty *</th>\r\n                      <th>Rate *</th>\r\n                      <th>Amount</th>\r\n                      <th></th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"(item, index) in form.items\" :key=\"index\">\r\n                      <td>\r\n                        <select v-model=\"item.item_code\" @change=\"updateItemDetails(index)\" required>\r\n                          <option value=\"\" disabled>Select Item</option>\r\n                          <option v-for=\"product in items\" :value=\"product.name\" :key=\"product.name\">\r\n                            {{ product.item_name }}\r\n                          </option>\r\n                        </select>\r\n                      </td>\r\n                      <td>\r\n                        <input type=\"text\" v-model=\"item.description\" placeholder=\"Description\">\r\n                      </td>\r\n                      <td>\r\n                        <input type=\"number\" v-model.number=\"item.qty\" min=\"1\" @input=\"calculateAmount(index)\" required>\r\n                      </td>\r\n                      <td>\r\n                        <input type=\"number\" v-model.number=\"item.rate\" step=\"0.01\" @input=\"calculateAmount(index)\" required>\r\n                      </td>\r\n                      <td>\r\n                        {{ formatCurrency(item.amount || 0) }}\r\n                      </td>\r\n                      <td>\r\n                        <button type=\"button\" @click=\"removeItem(index)\" class=\"btn-remove\">Ã—</button>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <button type=\"button\" @click=\"addItem\" class=\"btn-add\">+ Add Item</button>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Taxes Section -->\r\n            <div class=\"form-section\">\r\n              <h3>Taxes</h3>\r\n              <div class=\"form-row\">\r\n                <div class=\"form-group\">\r\n                  <label>Tax Template</label>\r\n                  <select v-model=\"form.tax_template\" @change=\"updateTaxes\">\r\n                    <option value=\"\">Select Tax Template</option>\r\n                    <option v-for=\"tax in taxTemplates\" :value=\"tax.name\" :key=\"tax.name\">\r\n                      {{ tax.title }} ({{ tax.taxes[0].rate }}%)\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Totals Section -->\r\n            <div class=\"totals-section\">\r\n              <div class=\"total-row\">\r\n                <span>Net Total:</span>\r\n                <span>{{ formatCurrency(netTotal) }}</span>\r\n              </div>\r\n              <div class=\"total-row\" v-for=\"tax in form.taxes\" :key=\"tax.name\">\r\n                <span>{{ tax.description }} ({{ tax.rate }}%):</span>\r\n                <span>{{ formatCurrency(tax.tax_amount) }}</span>\r\n              </div>\r\n              <div class=\"total-row grand-total\">\r\n                <span>Grand Total:</span>\r\n                <span>{{ formatCurrency(grandTotal) }}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Submit Section -->\r\n            <div class=\"form-actions\">\r\n              <button type=\"submit\" :disabled=\"loading\" class=\"btn-submit\">\r\n                {{ loading ? 'Creating Invoice...' : 'Create Invoice' }}\r\n              </button>\r\n              <button type=\"button\" @click=\"resetForm\" class=\"btn-reset\">\r\n                Reset Form\r\n              </button>\r\n            </div>\r\n\r\n            <!-- Status Messages -->\r\n            <div v-if=\"success\" class=\"alert success\">\r\n              Invoice created successfully! <strong>Invoice ID: {{ success }}</strong>\r\n            </div>\r\n            <div v-if=\"error\" class=\"alert error\">\r\n              {{ error }}\r\n            </div>\r\n          </form>\r\n        </div>\r\n\r\n        <!-- Recent Invoices -->\r\n        <div class=\"recent-invoices\" v-if=\"recentInvoices.length > 0\">\r\n          <h2>Recent Invoices</h2>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Invoice #</th>\r\n                <th>Customer</th>\r\n                <th>Date</th>\r\n                <th>Amount</th>\r\n                <th>Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"invoice in recentInvoices\" :key=\"invoice.name\" @click=\"viewInvoice(invoice.name)\">\r\n                <td>{{ invoice.name }}</td>\r\n                <td>{{ invoice.customer_name }}</td>\r\n                <td>{{ formatDate(invoice.posting_date) }}</td>\r\n                <td>{{ formatCurrency(invoice.grand_total) }}</td>\r\n                <td :class=\"'status-' + invoice.status.toLowerCase()\">{{ invoice.status }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        customer: '',\r\n        posting_date: new Date().toISOString().slice(0, 10),\r\n        due_date: '',\r\n        items: [{\r\n          item_code: '',\r\n          item_name: '',\r\n          description: '',\r\n          qty: 1,\r\n          rate: 0,\r\n          amount: 0\r\n        }],\r\n        tax_template: '',\r\n        taxes: []\r\n      },\r\n      customers: [],\r\n      items: [],\r\n      taxTemplates: [],\r\n      recentInvoices: [],\r\n      loading: false,\r\n      error: null,\r\n      success: null\r\n    };\r\n  },\r\n  computed: {\r\n    netTotal() {\r\n      return this.form.items.reduce((sum, item) => sum + (item.amount || 0), 0);\r\n    },\r\n    grandTotal() {\r\n      const taxTotal = this.form.taxes.reduce((sum, tax) => sum + (tax.tax_amount || 0), 0);\r\n      return this.netTotal + taxTotal;\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchCustomers();\r\n    this.fetchItems();\r\n    this.fetchTaxTemplates();\r\n    this.fetchRecentInvoices();\r\n  },\r\n  methods: {\r\n    async fetchCustomers() {\r\n      try {\r\n        const response = await axios.get('/api/method/frappe.client.get_list', {\r\n          params: {\r\n            doctype: 'Customer',\r\n            fields: ['name', 'customer_name'],\r\n            limit: 100\r\n          }\r\n        });\r\n        this.customers = response.data.message;\r\n      } catch (error) {\r\n        console.error('Error fetching customers:', error);\r\n      }\r\n    },\r\n    async fetchItems() {\r\n      try {\r\n        const response = await axios.get('/api/method/frappe.client.get_list', {\r\n          params: {\r\n            doctype: 'Item',\r\n            fields: ['name', 'item_name', 'standard_rate', 'description'],\r\n            filters: [['disabled', '=', 0]],\r\n            limit: 100\r\n          }\r\n        });\r\n        this.items = response.data.message;\r\n      } catch (error) {\r\n        console.error('Error fetching items:', error);\r\n      }\r\n    },\r\n    async fetchTaxTemplates() {\r\n      try {\r\n        const response = await axios.get('/api/method/frappe.client.get_list', {\r\n          params: {\r\n            doctype: 'Sales Taxes and Charges Template',\r\n            fields: ['name', 'title', 'taxes.rate', 'taxes.account_head', 'taxes.description'],\r\n            limit: 20\r\n          }\r\n        });\r\n        this.taxTemplates = response.data.message;\r\n      } catch (error) {\r\n        console.error('Error fetching tax templates:', error);\r\n      }\r\n    },\r\n    async fetchRecentInvoices() {\r\n      try {\r\n        const response = await axios.get('/api/method/frappe.client.get_list', {\r\n          params: {\r\n            doctype: 'Sales Invoice',\r\n            fields: ['name', 'customer_name', 'posting_date', 'grand_total', 'status'],\r\n            order_by: 'modified desc',\r\n            limit: 5\r\n          }\r\n        });\r\n        this.recentInvoices = response.data.message;\r\n      } catch (error) {\r\n        console.error('Error fetching recent invoices:', error);\r\n      }\r\n    },\r\n    addItem() {\r\n      this.form.items.push({\r\n        item_code: '',\r\n        item_name: '',\r\n        description: '',\r\n        qty: 1,\r\n        rate: 0,\r\n        amount: 0\r\n      });\r\n    },\r\n    removeItem(index) {\r\n      if (this.form.items.length > 1) {\r\n        this.form.items.splice(index, 1);\r\n      }\r\n    },\r\n    updateItemDetails(index) {\r\n      const selectedItem = this.items.find(item => item.name === this.form.items[index].item_code);\r\n      if (selectedItem) {\r\n        this.form.items[index].item_name = selectedItem.item_name;\r\n        this.form.items[index].description = selectedItem.description;\r\n        if (selectedItem.standard_rate) {\r\n          this.form.items[index].rate = selectedItem.standard_rate;\r\n        }\r\n        this.calculateAmount(index);\r\n      }\r\n    },\r\n    calculateAmount(index) {\r\n      this.form.items[index].amount = this.form.items[index].qty * this.form.items[index].rate;\r\n    },\r\n    updateTaxes() {\r\n      if (!this.form.tax_template) {\r\n        this.form.taxes = [];\r\n        return;\r\n      }\r\n      \r\n      const selectedTemplate = this.taxTemplates.find(t => t.name === this.form.tax_template);\r\n      if (selectedTemplate) {\r\n        this.form.taxes = selectedTemplate.taxes.map(tax => ({\r\n          ...tax,\r\n          tax_amount: this.netTotal * (tax.rate / 100)\r\n        }));\r\n      }\r\n    },\r\n    formatCurrency(value) {\r\n      return new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: 'USD'\r\n      }).format(value);\r\n    },\r\n    formatDate(dateString) {\r\n      return new Date(dateString).toLocaleDateString();\r\n    },\r\n    async submitInvoice() {\r\n      this.loading = true;\r\n      this.error = null;\r\n      this.success = null;\r\n\r\n      try {\r\n        const payload = {\r\n          doctype: 'Sales Invoice',\r\n          customer: this.form.customer,\r\n          posting_date: this.form.posting_date,\r\n          due_date: this.form.due_date || this.form.posting_date,\r\n          items: this.form.items.map(item => ({\r\n            item_code: item.item_code,\r\n            item_name: item.item_name,\r\n            description: item.description,\r\n            qty: item.qty,\r\n            rate: item.rate,\r\n            amount: item.amount\r\n          })),\r\n          taxes: this.form.taxes.map(tax => ({\r\n            charge_type: 'On Net Total',\r\n            account_head: tax.account_head,\r\n            description: tax.description,\r\n            rate: tax.rate,\r\n            tax_amount: tax.tax_amount\r\n          }))\r\n        };\r\n\r\n        const response = await axios.post('/api/method/frappe.client.insert', {\r\n          doc: payload\r\n        });\r\n\r\n        this.success = response.data.message.name;\r\n        this.resetForm();\r\n        this.fetchRecentInvoices();\r\n      } catch (error) {\r\n        console.error('Error creating invoice:', error);\r\n        this.error = error.response?.data?.message || 'Failed to create invoice. Please try again.';\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    resetForm() {\r\n      this.form = {\r\n        customer: '',\r\n        posting_date: new Date().toISOString().slice(0, 10),\r\n        due_date: '',\r\n        items: [{\r\n          item_code: '',\r\n          item_name: '',\r\n          description: '',\r\n          qty: 1,\r\n          rate: 0,\r\n          amount: 0\r\n        }],\r\n        tax_template: '',\r\n        taxes: []\r\n      };\r\n    },\r\n    viewInvoice(invoiceName) {\r\n      // Implement your invoice viewing logic here\r\n      console.log('View invoice:', invoiceName);\r\n      // Example: this.$router.push(`/invoices/${invoiceName}`);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.sales-invoice-app {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.app-header {\r\n  background-color: #2c3e50;\r\n  color: white;\r\n  padding: 1rem;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.app-header h1 {\r\n  margin: 0;\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.app-main {\r\n  flex: 1;\r\n  padding: 1rem;\r\n}\r\n\r\n.invoice-container {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 2rem;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n@media (min-width: 992px) {\r\n  .invoice-container {\r\n    grid-template-columns: 2fr 1fr;\r\n  }\r\n}\r\n\r\n.invoice-form, .recent-invoices {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.05);\r\n}\r\n\r\n.form-section {\r\n  margin-bottom: 1.5rem;\r\n  padding-bottom: 1.5rem;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.form-section h3 {\r\n  margin-top: 0;\r\n  margin-bottom: 1rem;\r\n  color: #2c3e50;\r\n}\r\n\r\n.form-row {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  color: #555;\r\n}\r\n\r\n.form-group input,\r\n.form-group select {\r\n  width: 100%;\r\n  padding: 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.items-table {\r\n  margin: 1rem 0;\r\n}\r\n\r\n.items-table table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.items-table th,\r\n.items-table td {\r\n  padding: 0.75rem;\r\n  border: 1px solid #eee;\r\n  text-align: left;\r\n}\r\n\r\n.items-table th {\r\n  background-color: #f8f9fa;\r\n  font-weight: 500;\r\n}\r\n\r\n.items-table input,\r\n.items-table select {\r\n  width: 100%;\r\n  padding: 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n}\r\n\r\n.btn-remove {\r\n  background: #ff4444;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50%;\r\n  width: 25px;\r\n  height: 25px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  line-height: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.btn-add {\r\n  background: #4CAF50;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.totals-section {\r\n  margin: 1.5rem 0;\r\n  padding: 1rem;\r\n  background-color: #f8f9fa;\r\n  border-radius: 4px;\r\n}\r\n\r\n.total-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.grand-total {\r\n  font-weight: bold;\r\n  font-size: 1.1rem;\r\n  margin-top: 1rem;\r\n  padding-top: 1rem;\r\n  border-top: 1px solid #ddd;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.btn-submit {\r\n  background: #2196F3;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n}\r\n\r\n.btn-submit:disabled {\r\n  background: #cccccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-reset {\r\n  background: #f5f5f5;\r\n  color: #333;\r\n  border: 1px solid #ddd;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n}\r\n\r\n.alert {\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.alert.success {\r\n  background: #dff0d8;\r\n  color: #3c763d;\r\n  border: 1px solid #d6e9c6;\r\n}\r\n\r\n.alert.error {\r\n  background: #f2dede;\r\n  color: #a94442;\r\n  border: 1px solid #ebccd1;\r\n}\r\n\r\n.recent-invoices table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.recent-invoices th,\r\n.recent-invoices td {\r\n  padding: 0.75rem;\r\n  border: 1px solid #eee;\r\n  text-align: left;\r\n}\r\n\r\n.recent-invoices th {\r\n  background-color: #f8f9fa;\r\n  font-weight: 500;\r\n}\r\n\r\n.recent-invoices tr {\r\n  cursor: pointer;\r\n}\r\n\r\n.recent-invoices tr:hover {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.status-draft {\r\n  color: #f39c12;\r\n}\r\n\r\n.status-paid {\r\n  color: #27ae60;\r\n}\r\n\r\n.status-unpaid {\r\n  color: #e74c3c;\r\n}\r\n\r\n.status-return {\r\n  color: #9b59b6;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}